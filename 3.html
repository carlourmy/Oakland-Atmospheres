<!DOCTYPE html>
<html>

<head>
    <title></title>
    <script type="text/javascript" src="d3.min.js"></script>
    <script type="text/javascript" src-"https://code.jquery.com/jquery-2.1.4.min.js"></script>
    
    <style type="text/css">

     @font-face { font-family: bell; src: url('BellGothicStd-Bold.otf'); } 

    body {
        background-color: rgb(255, 250, 238);
        font-family: bell, sans-serif;
    }




    </style>

</head>

<body>
    <script type="text/javascript">
    var launch1 = [{
      "Time" : "Fri Jul 22 12:00:00 PDT 2011",
      "PRESS" : 101000,
      "CALCGPH" : 6,
      "TEMP" : 2866,
      "RH" : 912,
      "UWND" : "18",
      "VWND" : "-18"
    },
    {
      "Time" : "Fri Jul 22 12:00:00 PDT 2011",
      "PRESS" : 100000,
      "CALCGPH" : 89,
      "TEMP" : 2864,
      "RH" : 924,
      "UWND" : "19",
      "VWND" : "-23"
    },
    {
      "Time" : "Fri Jul 22 12:00:00 PDT 2011",
      "PRESS" : 98100,
      "CALCGPH" : 245,
      "TEMP" : 2856,
      "RH" : 955,
      "UWND" : "19",
      "VWND" : "-23"
    },
    {
      "Time" : "Fri Jul 22 12:00:00 PDT 2011",
      "PRESS" : 96200,
      "CALCGPH" : 409,
      "TEMP" : 2862,
      "RH" : 987,
      "UWND" : "19",
      "VWND" : "-23"
    },
    {
      "Time" : "Fri Jul 22 12:00:00 PDT 2011",
      "PRESS" : 93100,
      "CALCGPH" : 687,
      "TEMP" : 2938,
      "RH" : 563,
      "UWND" : "19",
      "VWND" : "-23"
    },
    {
      "Time" : "Fri Jul 22 12:00:00 PDT 2011",
      "PRESS" : 92500,
      "CALCGPH" : 743,
      "TEMP" : 2950,
      "RH" : 431,
      "UWND" : "23",
      "VWND" : "9"
    },
    {
      "Time" : "Fri Jul 22 12:00:00 PDT 2011",
      "PRESS" : 91800,
      "CALCGPH" : 812,
      "TEMP" : 2964,
      "RH" : 311,
      "UWND" : "23",
      "VWND" : "9"
    },
    {
      "Time" : "Fri Jul 22 12:00:00 PDT 2011",
      "PRESS" : 89700,
      "CALCGPH" : 1012,
      "TEMP" : 2956,
      "RH" : 329,
      "UWND" : "23",
      "VWND" : "9"
    },
    {
      "Time" : "Fri Jul 22 12:00:00 PDT 2011",
      "PRESS" : 85000,
      "CALCGPH" : 1475,
      "TEMP" : 2920,
      "RH" : 484,
      "UWND" : "3",
      "VWND" : "-36"
    },
    {
      "Time" : "Fri Jul 22 12:00:00 PDT 2011",
      "PRESS" : 84100,
      "CALCGPH" : 1570,
      "TEMP" : 2912,
      "RH" : 485,
      "UWND" : "3",
      "VWND" : "-36"
    },
    {
      "Time" : "Fri Jul 22 12:00:00 PDT 2011",
      "PRESS" : 81100,
      "CALCGPH" : 1879,
      "TEMP" : 2904,
      "RH" : 204,
      "UWND" : "3",
      "VWND" : "-36"
    },
    {
      "Time" : "Fri Jul 22 12:00:00 PDT 2011",
      "PRESS" : 75200,
      "CALCGPH" : 2517,
      "TEMP" : 2868,
      "RH" : 178,
      "UWND" : "3",
      "VWND" : "-36"
    },
    {
      "Time" : "Fri Jul 22 12:00:00 PDT 2011",
      "PRESS" : 72400,
      "CALCGPH" : 2835,
      "TEMP" : 2854,
      "RH" : 301,
      "UWND" : "3",
      "VWND" : "-36"
    },
    {
      "Time" : "Fri Jul 22 12:00:00 PDT 2011",
      "PRESS" : 70000,
      "CALCGPH" : 3116,
      "TEMP" : 2840,
      "RH" : 297,
      "UWND" : "53",
      "VWND" : "-30"
    },
    {
      "Time" : "Fri Jul 22 12:00:00 PDT 2011",
      "PRESS" : 66200,
      "CALCGPH" : 3582,
      "TEMP" : 2822,
      "RH" : 231,
      "UWND" : "53",
      "VWND" : "-30"
    },
    {
      "Time" : "Fri Jul 22 12:00:00 PDT 2011",
      "PRESS" : 62600,
      "CALCGPH" : 4041,
      "TEMP" : 2794,
      "RH" : 284,
      "UWND" : "53",
      "VWND" : "-30"
    },
    {
      "Time" : "Fri Jul 22 12:00:00 PDT 2011",
      "PRESS" : 50200,
      "CALCGPH" : 5807,
      "TEMP" : 2675,
      "RH" : 296,
      "UWND" : "53",
      "VWND" : "-30"
    },
    {
      "Time" : "Fri Jul 22 12:00:00 PDT 2011",
      "PRESS" : 50000,
      "CALCGPH" : 5838,
      "TEMP" : 2671,
      "RH" : 294,
      "UWND" : "79",
      "VWND" : "-37"
    },
    {
      "Time" : "Fri Jul 22 12:00:00 PDT 2011",
      "PRESS" : 40400,
      "CALCGPH" : 7463,
      "TEMP" : 2535,
      "RH" : 252,
      "UWND" : "79",
      "VWND" : "-37"
    },
    {
      "Time" : "Fri Jul 22 12:00:00 PDT 2011",
      "PRESS" : 40000,
      "CALCGPH" : 7537,
      "TEMP" : 2531,
      "RH" : 250,
      "UWND" : "109",
      "VWND" : "-29"
    },
    {
      "Time" : "Fri Jul 22 12:00:00 PDT 2011",
      "PRESS" : 37300,
      "CALCGPH" : 8054,
      "TEMP" : 2497,
      "RH" : 195,
      "UWND" : "109",
      "VWND" : "-29"
    },
    {
      "Time" : "Fri Jul 22 12:00:00 PDT 2011",
      "PRESS" : 31100,
      "CALCGPH" : 9353,
      "TEMP" : 2389,
      "RH" : 206,
      "UWND" : "109",
      "VWND" : "-29"
    },
    {
      "Time" : "Fri Jul 22 12:00:00 PDT 2011",
      "PRESS" : 30000,
      "CALCGPH" : 9604,
      "TEMP" : 2373,
      "RH" : 201,
      "UWND" : "159",
      "VWND" : "0"
    },
    {
      "Time" : "Fri Jul 22 12:00:00 PDT 2011",
      "PRESS" : 26100,
      "CALCGPH" : 10562,
      "TEMP" : 2301,
      "RH" : 228,
      "UWND" : "159",
      "VWND" : "0"
    },
    {
      "Time" : "Fri Jul 22 12:00:00 PDT 2011",
      "PRESS" : 25000,
      "CALCGPH" : 10851,
      "TEMP" : 2289,
      "RH" : 253,
      "UWND" : "182",
      "VWND" : "32"
    },
    {
      "Time" : "Fri Jul 22 12:00:00 PDT 2011",
      "PRESS" : 23200,
      "CALCGPH" : 11348,
      "TEMP" : 2269,
      "RH" : 246,
      "UWND" : "182",
      "VWND" : "32"
    },
    {
      "Time" : "Fri Jul 22 12:00:00 PDT 2011",
      "PRESS" : 22000,
      "CALCGPH" : 11698,
      "TEMP" : 2243,
      "RH" : 269,
      "UWND" : "182",
      "VWND" : "32"
    },
    {
      "Time" : "Fri Jul 22 12:00:00 PDT 2011",
      "PRESS" : 21000,
      "CALCGPH" : 12003,
      "TEMP" : 2235,
      "RH" : 266,
      "UWND" : "182",
      "VWND" : "32"
    },
    {
      "Time" : "Fri Jul 22 12:00:00 PDT 2011",
      "PRESS" : 20000,
      "CALCGPH" : 12320,
      "TEMP" : 2211,
      "RH" : 257,
      "UWND" : "298",
      "VWND" : "53"
    },
    {
      "Time" : "Fri Jul 22 12:00:00 PDT 2011",
      "PRESS" : 18100,
      "CALCGPH" : 12960,
      "TEMP" : 2173,
      "RH" : 279,
      "UWND" : "298",
      "VWND" : "53"
    },
    {
      "Time" : "Fri Jul 22 12:00:00 PDT 2011",
      "PRESS" : 17400,
      "CALCGPH" : 13210,
      "TEMP" : 2169,
      "RH" : 277,
      "UWND" : "298",
      "VWND" : "53"
    },
    {
      "Time" : "Fri Jul 22 12:00:00 PDT 2011",
      "PRESS" : 16600,
      "CALCGPH" : 13508,
      "TEMP" : 2153,
      "RH" : 271,
      "UWND" : "298",
      "VWND" : "53"
    },
    {
      "Time" : "Fri Jul 22 12:00:00 PDT 2011",
      "PRESS" : 15300,
      "CALCGPH" : 14017,
      "TEMP" : 2115,
      "RH" : 257,
      "UWND" : "298",
      "VWND" : "53"
    },
    {
      "Time" : "Fri Jul 22 12:00:00 PDT 2011",
      "PRESS" : 15000,
      "CALCGPH" : 14140,
      "TEMP" : 2117,
      "RH" : 258,
      "UWND" : "273",
      "VWND" : "48"
    },
    {
      "Time" : "Fri Jul 22 12:00:00 PDT 2011",
      "PRESS" : 14500,
      "CALCGPH" : 14350,
      "TEMP" : 2117,
      "RH" : 258,
      "UWND" : "273",
      "VWND" : "48"
    },
    {
      "Time" : "Fri Jul 22 12:00:00 PDT 2011",
      "PRESS" : 14100,
      "CALCGPH" : 14523,
      "TEMP" : 2105,
      "RH" : 293,
      "UWND" : "273",
      "VWND" : "48"
    },
    {
      "Time" : "Fri Jul 22 12:00:00 PDT 2011",
      "PRESS" : 13800,
      "CALCGPH" : 14656,
      "TEMP" : 2109,
      "RH" : 294,
      "UWND" : "273",
      "VWND" : "48"
    },
    {
      "Time" : "Fri Jul 22 12:00:00 PDT 2011",
      "PRESS" : 13200,
      "CALCGPH" : 14929,
      "TEMP" : 2095,
      "RH" : 289,
      "UWND" : "273",
      "VWND" : "48"
    },
    {
      "Time" : "Fri Jul 22 12:00:00 PDT 2011",
      "PRESS" : 12800,
      "CALCGPH" : 15118,
      "TEMP" : 2099,
      "RH" : 290,
      "UWND" : "273",
      "VWND" : "48"
    },
    {
      "Time" : "Fri Jul 22 12:00:00 PDT 2011",
      "PRESS" : 12200,
      "CALCGPH" : 15412,
      "TEMP" : 2083,
      "RH" : 284,
      "UWND" : "169",
      "VWND" : "45"
    },
    {
      "Time" : "Fri Jul 22 12:00:00 PDT 2011",
      "PRESS" : 11800,
      "CALCGPH" : 15615,
      "TEMP" : 2091,
      "RH" : 287,
      "UWND" : "169",
      "VWND" : "45"
    },
    {
      "Time" : "Fri Jul 22 12:00:00 PDT 2011",
      "PRESS" : 11300,
      "CALCGPH" : 15879,
      "TEMP" : 2083,
      "RH" : 284,
      "UWND" : "169",
      "VWND" : "45"
    },
    {
      "Time" : "Fri Jul 22 12:00:00 PDT 2011",
      "PRESS" : 10900,
      "CALCGPH" : 16099,
      "TEMP" : 2091,
      "RH" : 287,
      "UWND" : "169",
      "VWND" : "45"
    },
    {
      "Time" : "Fri Jul 22 12:00:00 PDT 2011",
      "PRESS" : 10600,
      "CALCGPH" : 16269,
      "TEMP" : 2079,
      "RH" : 282,
      "UWND" : "169",
      "VWND" : "45"
    },
    {
      "Time" : "Fri Jul 22 12:00:00 PDT 2011",
      "PRESS" : 10300,
      "CALCGPH" : 16444,
      "TEMP" : 2085,
      "RH" : 285,
      "UWND" : "169",
      "VWND" : "45"
    },
    {
      "Time" : "Fri Jul 22 12:00:00 PDT 2011",
      "PRESS" : 10000,
      "CALCGPH" : 16624,
      "TEMP" : 2075,
      "RH" : 281,
      "UWND" : "158",
      "VWND" : "42"
    },
    {
      "Time" : "Fri Jul 22 12:00:00 PDT 2011",
      "PRESS" : 9750,
      "CALCGPH" : 16783,
      "TEMP" : 2065,
      "RH" : 277,
      "UWND" : "158",
      "VWND" : "42"
    },
    {
      "Time" : "Fri Jul 22 12:00:00 PDT 2011",
      "PRESS" : 8880,
      "CALCGPH" : 17352,
      "TEMP" : 2097,
      "RH" : 289,
      "UWND" : "158",
      "VWND" : "42"
    },
    {
      "Time" : "Fri Jul 22 12:00:00 PDT 2011",
      "PRESS" : 8280,
      "CALCGPH" : 17781,
      "TEMP" : 2093,
      "RH" : 288,
      "UWND" : "158",
      "VWND" : "42"
    },
    {
      "Time" : "Fri Jul 22 12:00:00 PDT 2011",
      "PRESS" : 7380,
      "CALCGPH" : 18489,
      "TEMP" : 2117,
      "RH" : 258,
      "UWND" : "158",
      "VWND" : "42"
    },
    {
      "Time" : "Fri Jul 22 12:00:00 PDT 2011",
      "PRESS" : 7169,
      "CALCGPH" : 18668,
      "TEMP" : 2109,
      "RH" : 294,
      "UWND" : "158",
      "VWND" : "42"
    },
    {
      "Time" : "Fri Jul 22 12:00:00 PDT 2011",
      "PRESS" : 7000,
      "CALCGPH" : 18816,
      "TEMP" : 2119,
      "RH" : 259,
      "UWND" : "18",
      "VWND" : "8"
    },
    {
      "Time" : "Fri Jul 22 12:00:00 PDT 2011",
      "PRESS" : 6869,
      "CALCGPH" : 18937,
      "TEMP" : 2129,
      "RH" : 262,
      "UWND" : "18",
      "VWND" : "8"
    },
    {
      "Time" : "Fri Jul 22 12:00:00 PDT 2011",
      "PRESS" : 6410,
      "CALCGPH" : 19366,
      "TEMP" : 2113,
      "RH" : 256,
      "UWND" : "18",
      "VWND" : "8"
    },
    {
      "Time" : "Fri Jul 22 12:00:00 PDT 2011",
      "PRESS" : 5940,
      "CALCGPH" : 19837,
      "TEMP" : 2117,
      "RH" : 258,
      "UWND" : "18",
      "VWND" : "8"
    },
    {
      "Time" : "Fri Jul 22 12:00:00 PDT 2011",
      "PRESS" : 5000,
      "CALCGPH" : 20913,
      "TEMP" : 2153,
      "RH" : 271,
      "UWND" : "-70",
      "VWND" : "19"
    },
    {
      "Time" : "Fri Jul 22 12:00:00 PDT 2011",
      "PRESS" : 4710,
      "CALCGPH" : 21288,
      "TEMP" : 2171,
      "RH" : 278,
      "UWND" : "-70",
      "VWND" : "19"
    },
    {
      "Time" : "Fri Jul 22 12:00:00 PDT 2011",
      "PRESS" : 3820,
      "CALCGPH" : 22617,
      "TEMP" : 2167,
      "RH" : 277,
      "UWND" : "-70",
      "VWND" : "19"
    },
    {
      "Time" : "Fri Jul 22 12:00:00 PDT 2011",
      "PRESS" : 3320,
      "CALCGPH" : 23517,
      "TEMP" : 2219,
      "RH" : 260,
      "UWND" : "-70",
      "VWND" : "19"
    },
    {
      "Time" : "Fri Jul 22 12:00:00 PDT 2011",
      "PRESS" : 3000,
      "CALCGPH" : 24174,
      "TEMP" : 2211,
      "RH" : 257,
      "UWND" : "-128",
      "VWND" : "-11"
    },
    {
      "Time" : "Fri Jul 22 12:00:00 PDT 2011",
      "PRESS" : 2930,
      "CALCGPH" : 24333,
      "TEMP" : 2209,
      "RH" : 257,
      "UWND" : "-128",
      "VWND" : "-11"
    },
    {
      "Time" : "Fri Jul 22 12:00:00 PDT 2011",
      "PRESS" : 2430,
      "CALCGPH" : 25551,
      "TEMP" : 2241,
      "RH" : 236,
      "UWND" : "-128",
      "VWND" : "-11"
    },
    {
      "Time" : "Fri Jul 22 12:00:00 PDT 2011",
      "PRESS" : 2260,
      "CALCGPH" : 26026,
      "TEMP" : 2237,
      "RH" : 235,
      "UWND" : "-128",
      "VWND" : "-11"
    },
    {
      "Time" : "Fri Jul 22 12:00:00 PDT 2011",
      "PRESS" : 2150,
      "CALCGPH" : 26354,
      "TEMP" : 2259,
      "RH" : 214,
      "UWND" : "-128",
      "VWND" : "-11"
    },
    {
      "Time" : "Fri Jul 22 12:00:00 PDT 2011",
      "PRESS" : 2000,
      "CALCGPH" : 26831,
      "TEMP" : 2255,
      "RH" : 212,
      "UWND" : "-97",
      "VWND" : "-8"
    },
    {
      "Time" : "Fri Jul 22 12:00:00 PDT 2011",
      "PRESS" : 1420,
      "CALCGPH" : 29092,
      "TEMP" : 2261,
      "RH" : 189,
      "UWND" : "-97",
      "VWND" : "-8"
    },
    {
      "Time" : "Fri Jul 22 12:00:00 PDT 2011",
      "PRESS" : 1200,
      "CALCGPH" : 30216,
      "TEMP" : 2303,
      "RH" : 179,
      "UWND" : "-97",
      "VWND" : "-8"
    },
    {
      "Time" : "Fri Jul 22 12:00:00 PDT 2011",
      "PRESS" : 1120,
      "CALCGPH" : 30681,
      "TEMP" : 2307,
      "RH" : 180,
      "UWND" : "-97",
      "VWND" : "-8"
    },
    {
      "Time" : "Fri Jul 22 12:00:00 PDT 2011",
      "PRESS" : 1060,
      "CALCGPH" : 31055,
      "TEMP" : 2333,
      "RH" : 167,
      "UWND" : "-97",
      "VWND" : "-8"
    },
    {
      "Time" : "Fri Jul 22 12:00:00 PDT 2011",
      "PRESS" : 1000,
      "CALCGPH" : 31453,
      "TEMP" : 2341,
      "RH" : 169,
      "UWND" : "-199",
      "VWND" : "17"
    },
    {
      "Time" : "Fri Jul 22 12:00:00 PDT 2011",
      "PRESS" : 950,
      "CALCGPH" : 31812,
      "TEMP" : 2345,
      "RH" : 170,
      "UWND" : "-199",
      "VWND" : "17"
    }]

//Beginning Variables
var vv = window;
visWidth = vv.innerWidth*.95;
visHeight = vv.innerHeight*.85;

//Create Top Bar

var bar = d3.select("body")
    .append("svg")
    .attr("width", vv.innerWidth)
    .attr("height", 30)
    .append("rect")
    .attr("width", vv.innerWidth)
    .attr("height", 50)
    .attr("x", 0)
    .attr("y", -20)
    .attr("fill", "gainsboro");

//Create Master Container


// function updateWindow(){
//     var vv = window;
//     visWidth = vv.innerWidth;
//     visHeight = vv.innerHeight;
// };


var vis= d3.select("body")
	.append("svg")
	.attr("width", visWidth)
	.attr("height", visHeight)
	.attr("y", 0);

//Add Vertical Scale Text


for (i=0; i<=22; i++) {
    vis.append("text")
        .text( + (i*2) + " Miles")
        .attr("width", 100)
        .attr("text-align", "center")
        .attr("x", (visWidth/2)-10)
        .attr("y", .95*visHeight-(3218*i)*(visHeight/35000)+3)
        .attr("font-size", "10px")
        .attr("fill", "gray");

atms = [1, .63, .40, .25, .16, .10, .06, .04, .03, .02, .01]

    vis.append("text")
        .text( + (atms[i]) + " atm")
        .attr("width", 100)
        .attr("text-align", "center")
        .attr("x", (visWidth)-40)
        .attr("y", .95*visHeight-(3218*i)*(visHeight/35000)+3)
        .attr("font-size", "10px")
        .attr("fill", "gray");

//Add Vertical Scale Lines

    vis.append("svg:line")
        .attr("x1", 5)
        .attr("y1", .95*visHeight-(3218*i)*(visHeight/35000))
        .attr("x2", (visWidth/2)-20)
        .attr("y2", .95*visHeight-(3218*i)*(visHeight/35000))
        .attr("stroke", "silver")
        .attr("stroke-width", 1)
        .attr("stroke-dasharray", ("3,3"));

    vis.append("svg:line")
        .attr("x1", (visWidth/2)+35)
        .attr("y1", .95*visHeight-(3218*i)*(visHeight/35000))
        .attr("x2", visWidth-50)
        .attr("y2", .95*visHeight-(3218*i)*(visHeight/35000))
        .attr("stroke", "silver")
        .attr("stroke-width", 1)
        .attr("stroke-dasharray", ("3,3"));
};



//Create Container for Flight Path

var svgContainer = vis.append('svg')
    .data(launch1)
    .append("svg")
    .attr("width", visWidth/2)
    .attr("height", visHeight*.95);

//Add East West

svgContainer.append("text")
    .text ("West")
    .attr("x", visWidth/4-80)
    .attr("y", (visHeight*.95)-10)
    .attr("fill", "gray")
    .attr("font-size", "15px")

svgContainer.append("text")
    .text ("East")
    .attr("x", (visWidth/4)+50)
    .attr("y", (visHeight*.95)-10)
    .attr("fill", "gray")
    .attr("font-size", "15px")

//Add Horizontal Mile Lines

for (i=0; i<=10; i++) { 
    vis.append("svg:line")
        .attr("x1", (visWidth/4)+(i*(3219*((visWidth/4)/35000))))
        .attr("y1", (.95*visHeight)+20)
        .attr("x2", (visWidth/4)+(i*(3219*((visWidth/4)/35000))))
        .attr("y2", (.95*visHeight)+10)
        .attr("stroke", "silver")
        .attr("stroke-width", 1);
    };

for (i=1; i<=10; i++) { 
    vis.append("svg:line")
        .attr("x1", (visWidth/4)-(i*(3219*((visWidth/4)/35000))))
        .attr("y1", (.95*visHeight)+20)
        .attr("x2", (visWidth/4)-(i*(3219*((visWidth/4)/35000))))
        .attr("y2", (.95*visHeight)+10)
        .attr("stroke", "silver")
        .attr("stroke-width", 1);
    };
//Add Horizontal Mile Text

for (i=0; i<=10; i+=2) { 
    vis.append("text")
        .text(i*2)
        .attr("x", (visWidth/4)+(i*(3219*((visWidth/4)/35000)))-3)
        .attr("y",visHeight-1)
        .attr("font-size", "10px")
        .attr("fill", "gray");
};

for (i=2; i<=10; i+=2) { 
    vis.append("text")
        .text(i*2)
        .attr("x", (visWidth/4)-(i*(3219*((visWidth/4)/35000)))-3)
        .attr("y",visHeight-1)
        .attr("font-size", "10px")
        .attr("fill", "gray");
    };

//Create Running Total

var xPos = [{x:0,y:0}];
var totalWind=0;
var totalHeight=0;

for (i=1; i<launch1.length; i++ ){
    totalWind=Math.floor(totalWind+(launch1[i-1].UWND)*((launch1[i].CALCGPH-launch1[i-1].CALCGPH)/50));

    totalHeight=launch1[i].CALCGPH;

    xPos.push({"x":totalWind,"y":totalHeight});
}


//Create Line Function

var lineGen1 = d3.svg.line()
    .x(function(d) {    
        return (visWidth/4)+(d.x)*((visWidth/12)/35000)
    })
    .y(function(d) {
        return visHeight-(d.y)*((visHeight)/35000)
        })

// Add Clipping Mask

svgContainer.append('clipPath')
    .attr ("id","mask")
    .append("rect")
    .attr ("x", 0)
    .attr ("y", visHeight)
    .attr ("width", visWidth)
    .attr ("height", visHeight)
    .transition()
    .duration(50*launch1.length)
    .ease("linear")
    .attr ("y", visHeight-(launch1[launch1.length-1].CALCGPH*(visHeight/35000)));

//Add Line

var flightPath= svgContainer.append('svg:path')
    .attr('stroke', 'black')
    .attr('stroke-width', 3)
    .style("stroke-dasharray", ("3, 3"))
    .attr('fill', 'none')
    .attr('d', lineGen1(xPos))
    .attr("clip-path", "url(#mask)");

//Add Text of Date

    vis.append("text")
        .attr("x", 20)
        .attr("y", 20)
        .text(function(d) {
            return launch1[0].Time
        })
        .attr("font-size", "17px")
        .attr("fill", "black")
        .transition()
        .duration(100*(launch1[0].Time.length))
        .ease("linear")
        .tween("text", function() {
            var newText = launch1[0].Time;
            var textLength = launch1[0].Time.length;
            return function (t) {
                this.textContent= newText.slice(0, Math.round(t*textLength));
            };   
        })

//Create Temp Container
    var tempWidth = visWidth/4;
    var tempHeight = visHeight*.95;

    var tempSvg = vis.append('svg')
    	.attr("x", visWidth/2)
        .append("svg")
        .attr("width", tempWidth)
        .attr("height", tempHeight);

//Create Temp Bars Scale


horTempScale=d3.scale.linear()
                .domain([1887.06,3220.39])
                .range([0,tempWidth*.95]);

//Create Temp Scale Marks
for (i=1; i<=5; i++) {
vis.append("svg:line")
    .attr("x1", ((.5*visWidth)+tempWidth-5)-(i*(.95*tempWidth)/6))
    .attr("y1", tempHeight+10)
    .attr("x2", ((.5*visWidth)+tempWidth-5)-(i*(.95*tempWidth)/6))
    .attr("y2", tempHeight+20)
    .attr("stroke", "silver")
    .attr("stroke-width", 1);
};


for (i=1; i<=5; i++) { 
    vis.append("text")
        .text(-120+(i*40) + "F")
        .attr("x", ((.5*visWidth)+tempWidth-5)-(i*(.95*tempWidth)/6)-10)
        .attr("y",visHeight-1)
        .attr("font-size", "10px")
        .attr("fill", "gray");
};

//Create Temp Bars
    var lastRec = launch1.length - 1;

    tempSvg.selectAll("rect")
        .data(launch1)
        .enter()
        .append("rect")
        .attr("y", function(d, i) {
            return (tempHeight - (i * (tempHeight / launch1.length)) / (35000 / (launch1[lastRec].CALCGPH))-(tempHeight/launch1.length));
        })
        .attr("x", tempWidth - 5)
        .attr("height", function(d, i) {
            return ((tempHeight / (35000 / (launch1[lastRec].CALCGPH))) / (launch1.length+1)) - .5;
        })
        .attr("width", 0)
        .attr("fill", function(d) {
            if (d.TEMP > 2731.5) {
                return d3.rgb(123, 156, 184);
            } else {
                return d3.rgb(63, 96, 124);
            }
        })
        .transition()
        .delay(function(d, i) {
            return i * 50
        })
        .duration(1500)
        .ease("linear")
        .attr("x", function(d, i) {
            return tempWidth-(horTempScale(d.TEMP)) - 5;
        })
        .attr("width", function(d) {
            return (horTempScale(d.TEMP));
        })
        .attr("fill", function(d) {
            if (d.TEMP > 2731.5) {
                return d3.rgb(123, 156, 184);
            } else {
                return d3.rgb(63, 96, 124);
            };
        });

//Create Temp Caps

    tempSvg.selectAll("rect.cap")
        .data(launch1)
        .enter()
        .append("rect")
        .attr("class", "cap")
        .attr("y", function(d, i) {
            return (tempHeight - (i * (tempHeight / launch1.length)) / (35000 / (launch1[lastRec].CALCGPH))-(tempHeight/launch1.length));
        })
        .attr("x", function(d) {
            return (tempWidth - 5);
        })
        .attr("fill", "orangered")

    .transition()
        .delay(function(d, i) {
            return i * 50
        })
        .duration(1500)
        .ease("linear")

    .attr("x", function(d) {
            return (tempWidth - horTempScale(d.TEMP) - 5);
        })
        .attr("height", function(d, i) {
            return ((tempHeight / (35000 / (launch1[lastRec].CALCGPH))) / (launch1.length-1)) - .5;
        })
        .attr("width", 2)
        .attr("fill", "orangered");

//Create Humidity Container
    var rhWidth = visWidth/4.5;
    var rhHeight = visHeight*.95;

    var rhSvg = vis.append('svg')
    	.attr("x", visWidth*.75)
        .append("svg")
        .attr("width", rhWidth)
        .attr("height", rhHeight)
        .style("background-color", function(d) {
            return d3.rgb(255, 250, 238)
        });

//Create Humidity Scale

    var horRhScale = d3.scale.linear()
        .domain([0,1000])
        .range([0,rhWidth*.95]);

//Create Humidity Scale Marks

for (i=1; i<=5; i++) {
vis.append("svg:line")
    .attr("x1", (.75*visWidth)+(i*(.95*rhWidth)/5))
    .attr("y1", tempHeight+10)
    .attr("x2", (.75*visWidth)+(i*(.95*rhWidth)/5))
    .attr("y2", tempHeight+20)
    .attr("stroke", "silver")
    .attr("stroke-width", 1);
};

for (i=1; i<=5; i++) { 
    vis.append("text")
        .text((i*20) + "%")
        .attr("x", ((.5*visWidth)+tempWidth-5)+(i*(.95*rhWidth)/5))
        .attr("y",visHeight-1)
        .attr("font-size", "10px")
        .attr("fill", "gray");
};


//Create Humidity Bars

    var lastRec = launch1.length - 1

    rhSvg.selectAll("rect")
        .data(launch1)
        .enter()
        .append("rect")
        .attr("y", function(d, i) {
            return (rhHeight - (i * (rhHeight / launch1.length)) / (35000 / (launch1[lastRec].CALCGPH))-(rhHeight/launch1.length));
        })
        .attr("x", 5)
        .attr("height", function(d, i) {
            return ((rhHeight / (35000 / (launch1[lastRec].CALCGPH))) / (launch1.length-1)) - .5;
        })
        .attr("fill", function(d) {
            if (d.RH < 1000) {
                return d3.rgb(0, 128, 128);
            } else {
                return d3.rgb(0, 178, 178);
            };
        })
        .attr("width", 0)
        .transition()
        .delay(function(d, i) {
            return i * 50
        })
        .duration(1500)
        .ease("linear")

    .attr("width", function(d) {
        return horRhScale(d.RH);
    });

//Create Humidity Caps

    rhSvg.selectAll("rect.cap")
        .data(launch1)
        .enter()
        .append("rect")
        .attr("class", "cap")
        .attr("y", function(d, i) {
            return (rhHeight - (i * (rhHeight / launch1.length)) / (35000 / (launch1[lastRec].CALCGPH))-(rhHeight/launch1.length));
        })
        .attr("x", function(d) {
            return 5;
        })

    .attr("fill", "coral")
        .transition()
        .delay(function(d, i) {
            return i * 50
        })
        .duration(1500)
        .ease("linear")

        .attr("height", function(d, i) {
            return ((rhHeight / (35000 / (launch1[lastRec].CALCGPH))) / (launch1.length-1)) - .5;
        })
        .attr("width", 2)
        .attr("x", function(d) {
            return horRhScale(d.RH)+5;
        });

    </script>
</body>

</html>
